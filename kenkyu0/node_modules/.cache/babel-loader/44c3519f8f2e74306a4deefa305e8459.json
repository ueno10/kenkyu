{"ast":null,"code":"var _jsxFileName = \"/Users/mizuki/kenkyu0/src/index.js\";\nimport React, { useEffect, useState } from 'react';\nimport { render } from 'react-dom';\nimport * as d3 from 'd3';\nimport { set } from 'd3';\n\nclass Chart extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      count: '0',\n      filterKeyword: '',\n      policy: 'ALL',\n      reportYear: '',\n      show: 'default',\n      hideMinistries: new Set(),\n      transform: {\n        x: 0,\n        y: 0,\n        k: 1\n      }\n    };\n    this.zoom = d3.zoom().on('zoom', () => {\n      this.setState({\n        transform: d3.event.transform\n      });\n    });\n  }\n\n  componentDidMount() {\n    d3.select(this.refs.ff14).call(this.zoom).on(\"dblclick.zoom\", null);\n  }\n\n  render() {\n    const data = this.props.data;\n    console.log(data);\n    const ministries = new Set();\n\n    for (const node of data) {\n      ministries.add(node['府省庁']);\n    }\n\n    const ministryIndex = new Map(Array.from(ministries).map((ministry, i) => [ministry, i]));\n\n    if (this.state.show === 'default') {\n      for (const node of data) {\n        const index = ministryIndex.get(node['府省庁']);\n        node.fillColor = d3.hsl(360 * (index / ministries.size), 0.5, 0.5, 0.6).toString();\n      }\n    } else if (this.state.show === 'ministry') {\n      const clusters = new Set();\n\n      for (const node of data) {\n        clusters.add(node.cluster_in_ministry);\n      }\n\n      const clusterIndex = new Map(Array.from(clusters).map((cluster, i) => [cluster, i]));\n\n      for (const node of data) {\n        const index = clusterIndex.get(node.cluster_in_ministry);\n        node.fillColor = d3.hsl(360 * (index / clusters.size), 0.5, 0.5, 0.6).toString();\n      }\n    } else if (this.state.show === 'business') {\n      const clusters = new Set();\n\n      for (const node of data) {\n        clusters.add(node[this.state.policy]);\n      }\n\n      const clusterIndex = new Map(Array.from(clusters).map((cluster, i) => [cluster, i]));\n\n      for (const node of data) {\n        const index = clusterIndex.get(node[this.state.policy]);\n        node.fillColor = d3.hsl(360 * (index / clusters.size), 0.5, 0.5, 0.6).toString();\n      }\n    }\n\n    const policies = new Set();\n\n    for (const node of data) {\n      policies.add(node['主要政策・施策']);\n    }\n\n    const projectIds = new Set();\n\n    for (const node of data) {\n      projectIds.add(node['プロジェクトID']);\n    }\n\n    const projectIdIndex = new Map(Array.from(projectIds).map((projectId, i) => [projectId, i]));\n    const width = 1600;\n    const height = 1000;\n    const textMargin = 100;\n    const labelMargin = 1100;\n    const xScale = d3.scaleLinear().domain(d3.extent(data, item => +item.objective_x)).range([-450, 450]).nice();\n    const yScale = d3.scaleLinear().domain(d3.extent(data, item => +item.objective_y)).range([450, -450]).nice();\n    const moneyScale = d3.scaleLog().domain(d3.extent(data, item => +item['執行額'] + 10)).base(10).range([0, 15]).nice();\n    const showData = new Array();\n    data.filter((v, cnt) => {\n      return !this.state.hideMinistries.has(v['府省庁']);\n    }).filter((v, i) => {\n      if (v['事業名'].includes(this.state.filterKeyword) === true || v['事業の目的'].includes(this.state.filterKeyword) === true) {\n        return true;\n      } else {\n        return false;\n      }\n    }).filter((v, i) => {\n      if (this.state.policy === \"ALL\") {\n        return true;\n      } else {\n        if (v['主要政策・施策'].includes(this.state.policy) === true) {\n          return true;\n        } else {\n          return false;\n        }\n      }\n    }).filter((v, i) => {\n      if (v['公開年度'] === this.state.reportYear) {\n        return true;\n      } else {\n        return false;\n      }\n    }).map((v, i) => {\n      showData.push(v);\n    });\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"refine\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 17\n      }\n    }, \"\\u5E74\\u5EA6 : \"), /*#__PURE__*/React.createElement(\"select\", {\n      name: \"select\",\n      id: \"select\",\n      defalutValue: \"\",\n      onChange: event => {\n        this.setState({\n          reportYear: event.target.value\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"2015\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 19\n      }\n    }, \"27\\u5E74\\u5EA6\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"2016\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 19\n      }\n    }, \"28\\u5E74\\u5EA6\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"2017\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 19\n      }\n    }, \"29\\u5E74\\u5EA6\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"2018\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 19\n      }\n    }, \"30\\u5E74\\u5EA6\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"2019\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 19\n      }\n    }, \"31\\u5E74\\u5EA6\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"refine\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 17\n      }\n    }, \"\\u8868\\u793A\\u65B9\\u6CD5 : \"), /*#__PURE__*/React.createElement(\"select\", {\n      name: \"select\",\n      id: \"select\",\n      defalutValue: \"default\",\n      onChange: event => {\n        this.setState({\n          show: event.target.value\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"default\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 19\n      }\n    }, \"default\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"ministry\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 19\n      }\n    }, \"ministry\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"business\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 19\n      }\n    }, \"business\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"none\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 19\n      }\n    }, \"none\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"refine\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 17\n      }\n    }, \"\\u4E3B\\u8981\\u653F\\u7B56\\u30FB\\u65BD\\u7B56 : \"), /*#__PURE__*/React.createElement(\"select\", {\n      name: \"select\",\n      id: \"select\",\n      defalutValue: \"ALL\",\n      onChange: event => {\n        this.setState({\n          policy: event.target.value\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"option\", {\n      value: \"ALL\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 19\n      }\n    }, \"ALL\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\\u9AD8\\u9F62\\u793E\\u4F1A\\u5BFE\\u7B56\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 19\n      }\n    }, \"\\u9AD8\\u9F62\\u793E\\u4F1A\\u5BFE\\u7B56\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\\u7537\\u5973\\u5171\\u540C\\u53C2\\u753B\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 19\n      }\n    }, \"\\u7537\\u5973\\u5171\\u540C\\u53C2\\u753B\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\\u5C11\\u5B50\\u5316\\u793E\\u4F1A\\u5BFE\\u7B56\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 19\n      }\n    }, \"\\u5C11\\u5B50\\u5316\\u793E\\u4F1A\\u5BFE\\u7B56\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\\u5B50\\u3069\\u3082\\u30FB\\u82E5\\u8005\\u80B2\\u6210\\u652F\\u63F4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 19\n      }\n    }, \"\\u5B50\\u3069\\u3082\\u30FB\\u82E5\\u8005\\u80B2\\u6210\\u652F\\u63F4\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\\u56FD\\u571F\\u5F37\\u9771\\u5316\\u65BD\\u7B56\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 19\n      }\n    }, \"\\u56FD\\u571F\\u5F37\\u9771\\u5316\\u65BD\\u7B56\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\\u969C\\u5BB3\\u8005\\u65BD\\u7B56\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 19\n      }\n    }, \"\\u969C\\u5BB3\\u8005\\u65BD\\u7B56\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\\u5730\\u65B9\\u5275\\u751F\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 19\n      }\n    }, \"\\u5730\\u65B9\\u5275\\u751F\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\\u79D1\\u5B66\\u6280\\u8853\\u30FB\\u30A4\\u30CE\\u30D9\\u30FC\\u30B7\\u30E7\\u30F3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 19\n      }\n    }, \"\\u79D1\\u5B66\\u6280\\u8853\\u30FB\\u30A4\\u30CE\\u30D9\\u30FC\\u30B7\\u30E7\\u30F3\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\\uFF29\\uFF34\\u6226\\u7565\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 19\n      }\n    }, \"\\uFF29\\uFF34\\u6226\\u7565\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\\u4E00\\u5104\\u7DCF\\u6D3B\\u8E8D\\u63A8\\u9032\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 19\n      }\n    }, \"\\u4E00\\u5104\\u7DCF\\u6D3B\\u8E8D\\u63A8\\u9032\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\\u6D77\\u6D0B\\u653F\\u7B56\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 19\n      }\n    }, \"\\u6D77\\u6D0B\\u653F\\u7B56\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\\u89B3\\u5149\\u7ACB\\u56FD\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 19\n      }\n    }, \"\\u89B3\\u5149\\u7ACB\\u56FD\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\\u5B87\\u5B99\\u958B\\u767A\\u5229\\u7528\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 19\n      }\n    }, \"\\u5B87\\u5B99\\u958B\\u767A\\u5229\\u7528\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\\u5730\\u7403\\u6E29\\u6696\\u5316\\u5BFE\\u7B56\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 19\n      }\n    }, \"\\u5730\\u7403\\u6E29\\u6696\\u5316\\u5BFE\\u7B56\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\\uFF2F\\uFF24\\uFF21\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 19\n      }\n    }, \"\\uFF2F\\uFF24\\uFF21\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\\u81EA\\u6BBA\\u5BFE\\u7B56\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 19\n      }\n    }, \"\\u81EA\\u6BBA\\u5BFE\\u7B56\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\\u533B\\u7642\\u5206\\u91CE\\u306E\\u7814\\u7A76\\u958B\\u767A\\u95A2\\u9023\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 19\n      }\n    }, \"\\u533B\\u7642\\u5206\\u91CE\\u306E\\u7814\\u7A76\\u958B\\u767A\\u95A2\\u9023\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\\u6C96\\u7E04\\u632F\\u8208\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 19\n      }\n    }, \"\\u6C96\\u7E04\\u632F\\u8208\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\\u77E5\\u7684\\u8CA1\\u7523\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 19\n      }\n    }, \"\\u77E5\\u7684\\u8CA1\\u7523\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"2020\\u5E74\\u6771\\u4EAC\\u30AA\\u30EA\\u30D1\\u30E9\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 19\n      }\n    }, \"2020\\u5E74\\u6771\\u4EAC\\u30AA\\u30EA\\u30D1\\u30E9\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\\u72AF\\u7F6A\\u88AB\\u5BB3\\u8005\\u7B49\\u65BD\\u7B56\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 19\n      }\n    }, \"\\u72AF\\u7F6A\\u88AB\\u5BB3\\u8005\\u7B49\\u65BD\\u7B56\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\\u30AF\\u30FC\\u30EB\\u30B8\\u30E3\\u30D1\\u30F3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 19\n      }\n    }, \"\\u30AF\\u30FC\\u30EB\\u30B8\\u30E3\\u30D1\\u30F3\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\\u98DF\\u80B2\\u63A8\\u9032\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 19\n      }\n    }, \"\\u98DF\\u80B2\\u63A8\\u9032\"), /*#__PURE__*/React.createElement(\"option\", {\n      value: \"\\u305D\\u306E\\u4ED6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 19\n      }\n    }, \"\\u305D\\u306E\\u4ED6\")))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"refine\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: event => {\n        event.preventDefault();\n        this.setState({\n          filterKeyword: this.refs.search.value\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      ref: \"search\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 17\n      }\n    }, \"\\u7D5E\\u308A\\u8FBC\\u307F\"))), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 15\n      }\n    }, \"\\u4E8B\\u696D\\u6570\\uFF1A\", showData.length.toString()))), /*#__PURE__*/React.createElement(\"svg\", {\n      style: {\n        cursor: 'move'\n      },\n      ref: \"ff14\",\n      viewBox: `0 0 ${width} ${height}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"rect\", {\n      x: \"1\",\n      y: \"1\",\n      width: width - 2,\n      height: height - 2,\n      fill: \"none\",\n      stroke: \"blue\",\n      \"stroke-width\": \"2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"g\", {\n      transform: `translate(1400,0)`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"text\", {\n      x: 0,\n      y: 76,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 17\n      }\n    }, \"(\\u5343\\u4E07\\u5186)\"), moneyScale.ticks(7).map((m, i) => {\n      return /*#__PURE__*/React.createElement(\"g\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 28\n        }\n      }, /*#__PURE__*/React.createElement(\"circle\", {\n        cx: 0,\n        cy: `${i * 30 + textMargin}`,\n        r: moneyScale(m),\n        fill: \"black\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 23\n        }\n      }), /*#__PURE__*/React.createElement(\"text\", {\n        x: 20,\n        y: `${i * 30 + textMargin + 6}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 23\n        }\n      }, m / 10));\n    })), /*#__PURE__*/React.createElement(\"g\", {\n      transform: `translate(1100,0)`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"g\", {\n      style: {\n        cursor: 'pointer'\n      },\n      onClick: () => {\n        if (this.state.hideMinistries.size === 0) {\n          this.setState({\n            hideMinistries: new Set(ministries)\n          });\n        } else {\n          this.setState({\n            hideMinistries: new Set()\n          });\n        }\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"text\", {\n      x: 0,\n      y: `${-1 * 30 + textMargin + 6}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 19\n      }\n    }, \"(\\u5E9C\\u7701\\u5E81)\")), Array.from(ministries).map((ministry, i) => {\n      return /*#__PURE__*/React.createElement(\"g\", {\n        key: i,\n        style: {\n          cursor: 'pointer'\n        },\n        onClick: () => {\n          const newSet = new Set(this.state.hideMinistries);\n\n          if (newSet.has(ministry)) {\n            newSet.delete(ministry);\n          } else {\n            newSet.add(ministry);\n          }\n\n          this.setState({\n            hideMinistries: newSet\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 28\n        }\n      }, /*#__PURE__*/React.createElement(\"circle\", {\n        cx: 0,\n        cy: `${i * 30 + textMargin}`,\n        r: \"10\",\n        fill: d3.hsl(360 * (i / 20), 0.5, 0.5, 0.6),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 23\n        }\n      }), /*#__PURE__*/React.createElement(\"text\", {\n        x: 10,\n        y: `${i * 30 + textMargin + 6}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 23\n        }\n      }, ministry));\n    })), /*#__PURE__*/React.createElement(\"g\", {\n      transform: `translate(1400,600)`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"g\", {\n      style: {\n        cursor: 'pointer'\n      },\n      onClick: () => d3.select(this.refs.ff14).call(this.zoom.transform, d3.zoomIdentity.scale(1)),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"text\", {\n      x: 0,\n      y: 76,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 19\n      }\n    }, \"\\u30EA\\u30BB\\u30C3\\u30C8\"))), /*#__PURE__*/React.createElement(\"g\", {\n      transform: `translate(${this.state.transform.x},${this.state.transform.y})scale(${this.state.transform.k})`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"g\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 17\n      }\n    }, showData.map((v, i) => {\n      return /*#__PURE__*/React.createElement(\"g\", {\n        key: i,\n        transform: `translate(500,${height / 2})`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 30\n        }\n      }, /*#__PURE__*/React.createElement(\"title\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 25\n        }\n      }, v['府省庁'] + ', ', v['主要政策・施策'] + ', ', v['事業名'] + ', ', +v['執行額'] / 10), /*#__PURE__*/React.createElement(\"circle\", {\n        style: {\n          cursor: 'pointer'\n        },\n        cx: xScale(+v.objective_x),\n        cy: yScale(+v.objective_y),\n        r: moneyScale(+v['執行額'] + 10),\n        fill: v.fillColor,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 25\n        }\n      }));\n    })))));\n  }\n\n}\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: null\n    };\n  }\n\n  componentDidMount() {\n    const url = \"./data/tsne_+_clusters_list(1).json\"; //あ\n\n    window.fetch(url).then(response => response.json()).then(data => {\n      this.setState({\n        data\n      });\n    });\n  }\n\n  render() {\n    const {\n      data\n    } = this.state;\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"section\", {\n      className: \"section\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"content has-text-centered\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        margin: \"2em\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 17\n      }\n    }, data && /*#__PURE__*/React.createElement(Chart, {\n      data: data,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 21\n      }\n    }))))));\n  }\n\n}\n\nclass Root extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      error: null\n    };\n  }\n\n  static getDerivedStateFromError(error) {\n    return {\n      error\n    };\n  }\n\n  componentDidCatch(error, info) {\n    console.error(error.toString());\n  }\n\n  render() {\n    const {\n      error\n    } = this.state;\n\n    if (error != null) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"hero is-danger is-fullheight\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        class: \"hero-body\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 354,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        class: \"container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        class: \"title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 17\n        }\n      }, error.toString()))));\n    }\n\n    return /*#__PURE__*/React.createElement(App, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 14\n      }\n    });\n  }\n\n}\n\nrender( /*#__PURE__*/React.createElement(Root, {\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 367,\n    columnNumber: 8\n  }\n}), document.querySelector('#content'));","map":{"version":3,"sources":["/Users/mizuki/kenkyu0/src/index.js"],"names":["React","useEffect","useState","render","d3","set","Chart","Component","constructor","props","state","count","filterKeyword","policy","reportYear","show","hideMinistries","Set","transform","x","y","k","zoom","on","setState","event","componentDidMount","select","refs","ff14","call","data","console","log","ministries","node","add","ministryIndex","Map","Array","from","map","ministry","i","index","get","fillColor","hsl","size","toString","clusters","cluster_in_ministry","clusterIndex","cluster","policies","projectIds","projectIdIndex","projectId","width","height","textMargin","labelMargin","xScale","scaleLinear","domain","extent","item","objective_x","range","nice","yScale","objective_y","moneyScale","scaleLog","base","showData","filter","v","cnt","has","includes","push","target","value","preventDefault","search","length","cursor","ticks","m","newSet","delete","zoomIdentity","scale","App","url","window","fetch","then","response","json","margin","Root","error","getDerivedStateFromError","componentDidCatch","info","document","querySelector"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { render } from 'react-dom'\r\nimport * as d3 from 'd3'\r\nimport { set } from 'd3';\r\nclass Chart extends React.Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.state={\r\n        count : '0',\r\n        filterKeyword : '',\r\n        policy : 'ALL',\r\n        reportYear : '',\r\n        show : 'default',\r\n        hideMinistries : new Set(),\r\n        transform : {x:0,y:0,k:1}\r\n      };\r\n      this.zoom = d3.zoom()\r\n      .on('zoom',()=>{\r\n        this.setState({transform:d3.event.transform})\r\n      })\r\n    }\r\n    componentDidMount(){\r\n      d3.select(this.refs.ff14).call(this.zoom).on(\"dblclick.zoom\", null)\r\n    }\r\n  \r\n    render() {\r\n        const data = this.props.data\r\n        console.log(data)\r\n        const ministries = new Set()\r\n        for(const node of data){\r\n          ministries.add(node['府省庁'])\r\n        }\r\n        const ministryIndex = new Map(\r\n          Array.from(ministries).map((ministry,i)=>[ministry,i])\r\n        )\r\n        if(this.state.show === 'default'){\r\n          for (const node of data){\r\n            const index = ministryIndex.get(node['府省庁'])\r\n            node.fillColor = d3.hsl(360*(index/ministries.size),0.5,0.5,0.6).toString()\r\n          }\r\n        }\r\n        else if(this.state.show === 'ministry'){\r\n          const clusters = new Set()\r\n          for (const node of data){\r\n            clusters.add(node.cluster_in_ministry)\r\n          }\r\n          const clusterIndex = new Map(\r\n            Array.from(clusters).map((cluster,i)=>[cluster,i])\r\n          )\r\n          for(const node of data){\r\n            const index = clusterIndex.get(node.cluster_in_ministry)\r\n            node.fillColor = d3.hsl(360*(index/clusters.size),0.5,0.5,0.6).toString()\r\n          }\r\n        }\r\n        else if(this.state.show === 'business'){\r\n          const clusters = new Set()\r\n          for (const node of data){\r\n            clusters.add(node[this.state.policy])\r\n          }\r\n          const clusterIndex = new Map(\r\n            Array.from(clusters).map((cluster,i)=>[cluster,i])\r\n          )\r\n          for(const node of data){\r\n            const index = clusterIndex.get(node[this.state.policy])\r\n            node.fillColor = d3.hsl(360*(index/clusters.size),0.5,0.5,0.6).toString()\r\n          }\r\n        }\r\n        const policies = new Set()\r\n        for(const node of data){\r\n          policies.add(node['主要政策・施策'])\r\n        }\r\n        const projectIds = new Set()\r\n        for(const node of data){\r\n          projectIds.add(node['プロジェクトID'])\r\n        }\r\n        const projectIdIndex = new Map(\r\n          Array.from(projectIds).map((projectId,i)=>[projectId,i])\r\n        )\r\n        \r\n        const width = 1600\r\n        const height = 1000\r\n        const textMargin = 100\r\n        const labelMargin = 1100\r\n        const xScale = d3.scaleLinear()\r\n        .domain(d3.extent(data, (item) => +(item.objective_x)))\r\n        .range([-450,450])\r\n        .nice()\r\n        const yScale = d3.scaleLinear()\r\n        .domain(d3.extent(data, (item) => +(item.objective_y)))\r\n        .range([450, -450])\r\n        .nice() \r\n        const moneyScale = d3.scaleLog()\r\n        .domain(d3.extent(data, (item) => (+(item['執行額'])+10)))\r\n        .base(10)\r\n        .range([0, 15])\r\n        .nice()\r\n\r\n        const showData = new Array()\r\n        data.filter((v,cnt)=>{\r\n          return(\r\n            !this.state.hideMinistries.has(v['府省庁'])\r\n          )\r\n        }).filter((v,i)=>{\r\n          if(v['事業名'].includes(this.state.filterKeyword)===true || v['事業の目的'].includes(this.state.filterKeyword)===true){\r\n            return true\r\n          }\r\n          else{\r\n            return false\r\n          }\r\n        }).filter((v,i)=>{\r\n          if(this.state.policy === \"ALL\"){\r\n            return true\r\n          }\r\n          else{\r\n            if(v['主要政策・施策'].includes(this.state.policy)===true){\r\n              return true\r\n            }\r\n            else{\r\n              return false\r\n            }\r\n          }\r\n        }).filter((v,i)=>{\r\n          if(v['公開年度'] === this.state.reportYear){\r\n            return true\r\n          }\r\n          else{\r\n            return false\r\n          }\r\n        }).map((v,i)=>{\r\n          showData.push(v)\r\n        })\r\n  \r\n        return (\r\n          <div>\r\n            <div className='refine'>\r\n              <div>\r\n                <b>年度 : </b>\r\n                <select name='select' id='select' defalutValue='' onChange ={(event)=>{this.setState({reportYear:event.target.value})}}>\r\n                  <option value=''></option>\r\n                  <option value='2015'>27年度</option>\r\n                  <option value='2016'>28年度</option>\r\n                  <option value='2017'>29年度</option>\r\n                  <option value='2018'>30年度</option>\r\n                  <option value='2019'>31年度</option>\r\n                  </select>\r\n              </div>\r\n            </div>\r\n            <div className='refine'>\r\n              <div>\r\n                <b>表示方法 : </b>\r\n                <select name=\"select\" id=\"select\" defalutValue=\"default\" onChange ={(event)=>{this.setState({show:event.target.value})}}>\r\n                  <option value=\"default\">default</option>\r\n                  <option value=\"ministry\">ministry</option>\r\n                  <option value=\"business\">business</option>\r\n                  <option value=\"none\">none</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n            <div className='refine'>\r\n              <div>\r\n                <b>主要政策・施策 : </b>\r\n                <select name='select' id='select' defalutValue='ALL' onChange ={(event)=>{this.setState({policy:event.target.value})}}>\r\n                  <option value='ALL'>ALL</option>\r\n                  <option value='高齢社会対策'>高齢社会対策</option>\r\n                  <option value='男女共同参画'>男女共同参画</option>\r\n                  <option value='少子化社会対策'>少子化社会対策</option>\r\n                  <option value='子ども・若者育成支援'>子ども・若者育成支援</option>\r\n                  <option value='国土強靱化施策'>国土強靱化施策</option>\r\n                  <option value='障害者施策'>障害者施策</option>\r\n                  <option value='地方創生'>地方創生</option>\r\n                  <option value='科学技術・イノベーション'>科学技術・イノベーション</option>\r\n                  <option value='ＩＴ戦略'>ＩＴ戦略</option>\r\n                  <option value='一億総活躍推進'>一億総活躍推進</option>\r\n                  <option value='海洋政策'>海洋政策</option>\r\n                  <option value='観光立国'>観光立国</option>\r\n                  <option value='宇宙開発利用'>宇宙開発利用</option>\r\n                  <option value='地球温暖化対策'>地球温暖化対策</option>\r\n                  <option value='ＯＤＡ'>ＯＤＡ</option>\r\n                  <option value='自殺対策'>自殺対策</option>\r\n                  <option value='医療分野の研究開発関連'>医療分野の研究開発関連</option>\r\n                  <option value='沖縄振興'>沖縄振興</option>\r\n                  <option value='知的財産'>知的財産</option>\r\n                  <option value='2020年東京オリパラ'>2020年東京オリパラ</option>\r\n                  <option value='犯罪被害者等施策'>犯罪被害者等施策</option>\r\n                  <option value='クールジャパン'>クールジャパン</option>\r\n                  <option value='食育推進'>食育推進</option>\r\n                  <option value='その他'>その他</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n            <div className='refine'>\r\n              <form onSubmit={(event)=>{\r\n                  event.preventDefault()\r\n                  this.setState({filterKeyword:this.refs.search.value})\r\n                }}\r\n                >\r\n                <input ref='search'>\r\n                </input>\r\n                <button>絞り込み\r\n                </button>\r\n              </form>\r\n            </div>\r\n            <div>\r\n              <div>\r\n              <b>事業数：{(showData.length).toString()}</b>\r\n              </div>\r\n            </div>\r\n            <svg style = {{cursor:'move'}}ref = 'ff14' viewBox= {`0 0 ${width} ${height}`}>\r\n              <rect x=\"1\" y=\"1\" width={width-2} height={height-2}\r\n                fill=\"none\" stroke=\"blue\" stroke-width=\"2\" />\r\n              <g transform = {`translate(1400,0)`}>\r\n                <text x={0} y={76}>(千万円)</text>\r\n                {\r\n                  moneyScale.ticks(7).map((m,i)=>{ \r\n                    return <g>\r\n                      <circle \r\n                        cx={0} cy={`${i*30+textMargin}`}\r\n                        r={moneyScale(m)}\r\n                        fill='black'\r\n                        />\r\n                      <text x={20}y={`${i*30+textMargin+6}`}>{m/10}</text>\r\n                    </g>\r\n                  })\r\n                }\r\n              </g>\r\n              <g transform = {`translate(1100,0)`}>\r\n                <g style = {{cursor:'pointer'}}onClick={()=>{  \r\n                    if(this.state.hideMinistries.size === 0){\r\n                      this.setState({hideMinistries:new Set(ministries)})\r\n                    }else{\r\n                      this.setState({hideMinistries:new Set()})\r\n                    }}}>\r\n                  <text x={0} y={`${-1*30+textMargin+6}`}>(府省庁)</text>\r\n                </g>\r\n                {\r\n                  Array.from(ministries).map((ministry,i)=>{\r\n                    return <g key = {i} style = {{cursor:'pointer'}}onClick={()=>{\r\n                      const newSet = new Set(this.state.hideMinistries)\r\n                        if(newSet.has(ministry)){\r\n                          newSet.delete(ministry)\r\n                        }else{\r\n                          newSet.add(ministry)\r\n                        }\r\n                        this.setState({hideMinistries:newSet})\r\n                      }}\r\n                      >\r\n                      <circle \r\n                        cx={0} cy={`${i*30+textMargin}`}\r\n                        r='10'\r\n                        fill={d3.hsl(360*(i/20),0.5,0.5,0.6)}\r\n                        />\r\n                      <text x={10}y={`${i*30+textMargin+6}`}>{ministry}</text>\r\n                    </g>\r\n                  })\r\n                }\r\n              </g>\r\n              <g transform = {`translate(1400,600)`}>\r\n                <g style = {{cursor:'pointer'}}onClick={()=>\r\n                  d3.select(this.refs.ff14).call(this.zoom.transform, d3.zoomIdentity.scale(1))\r\n                  }>\r\n                  <text x={0} y={76}>リセット</text>\r\n                </g>\r\n              </g>\r\n              <g transform = {`translate(${this.state.transform.x},${this.state.transform.y})scale(${this.state.transform.k})`}>\r\n                <g>\r\n                  {\r\n                    showData.map((v,i)=>{\r\n                      return <g key={i} transform = {`translate(500,${height/2})`}>\r\n                        <title>\r\n                          {v['府省庁']+', '}\r\n                          {v['主要政策・施策']+', '}\r\n                          {v['事業名']+', '}\r\n                          {+(v['執行額'])/10}\r\n                        </title>\r\n                        <circle style = {{cursor:'pointer'}}\r\n                          cx={xScale(+(v.objective_x))} cy={yScale(+(v.objective_y))} \r\n                          r={moneyScale(+(v['執行額'])+10)}\r\n                          fill={v.fillColor}\r\n                          />\r\n                      </g>\r\n                    })\r\n                  }\r\n                </g>\r\n              </g>\r\n            </svg>\r\n          </div>\r\n        );\r\n      \r\n    }\r\n  }\r\n  \r\n  class App extends React.Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = {\r\n        data: null\r\n      };\r\n    }\r\n    \r\n    componentDidMount() {\r\n      const url =\r\n        \"./data/tsne_+_clusters_list(1).json\"; //あ\r\n      window\r\n        .fetch(url)\r\n        .then(response => response.json())\r\n        .then(data => {\r\n          this.setState({ data });\r\n        });\r\n    }\r\n  \r\n    render() {\r\n      const { data } = this.state;\r\n      return (\r\n        <>\r\n          <section className=\"section\">\r\n            <div className=\"container\">\r\n              <div className=\"content has-text-centered\">\r\n                <div style={{ margin: \"2em\" }}>\r\n                  {data&&\r\n                    <Chart data={data} />\r\n                    }\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </section>\r\n          {/* <footer className=\"footer\">\r\n          </footer> */}\r\n        </>\r\n      );\r\n    }\r\n  }\r\n  \r\n  class Root extends React.Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = {\r\n        error: null\r\n      };\r\n    }\r\n  \r\n    static getDerivedStateFromError(error) {\r\n      return { error };\r\n    }\r\n  \r\n    componentDidCatch(error, info) {\r\n      console.error(error.toString());\r\n    }\r\n  \r\n    render() {\r\n      const { error } = this.state;\r\n      if (error != null) {\r\n        return (\r\n          <div className=\"hero is-danger is-fullheight\">\r\n            <div class=\"hero-body\">\r\n              <div class=\"container\">\r\n                <h1 class=\"title\">{error.toString()}</h1>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        );\r\n      }\r\n      return <App />;\r\n    }\r\n  }\r\n  \r\n\r\nrender(<Root />, document.querySelector('#content'))"]},"metadata":{},"sourceType":"module"}