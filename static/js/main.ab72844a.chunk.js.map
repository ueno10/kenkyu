{"version":3,"sources":["index.js"],"names":["Chart","props","state","count","filterKeyword","policy","reportYear","show","money","divisions","hideMinistries","Set","transform","x","y","k","zoom","d3","on","setState","this","refs","ff14","call","data","console","log","ministries","node","add","ministryIndex","Map","Array","from","map","ministry","i","index","get","fillColor","size","toString","clusters","cluster_in_ministry","clusterIndex","cluster","policies","projectIds","projectId","xScale","domain","item","objective_x","range","nice","yScale","objective_y","showData","filter","v","cnt","has","includes","push","moneyScale","base","className","name","id","defalutValue","onChange","event","target","value","onSubmit","preventDefault","search","ref","length","style","cursor","viewBox","width","height","fill","stroke","stroke-width","ticks","m","cx","cy","r","onClick","key","newSet","delete","scale","React","Component","App","window","fetch","then","response","json","margin","Root","error","info","class","render","document","querySelector"],"mappings":"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","file":"static/js/main.ab72844a.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { render } from 'react-dom'\r\nimport * as d3 from 'd3'\r\nimport { set } from 'd3';\r\nclass Chart extends React.Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.state={\r\n        count : '0',\r\n        filterKeyword : '',\r\n        policy : 'ALL',\r\n        reportYear : '',\r\n        show : 'default',\r\n        money : '補正予算', \r\n        divisions : 'ALL',\r\n        hideMinistries : new Set(),\r\n        transform : {x:0,y:0,k:1}\r\n      };\r\n      this.zoom = d3.zoom()\r\n      .on('zoom',()=>{\r\n        this.setState({transform:d3.event.transform})\r\n      })\r\n    }\r\n    componentDidMount(){\r\n      d3.select(this.refs.ff14).call(this.zoom).on(\"dblclick.zoom\", null)\r\n    }\r\n  \r\n    render() {\r\n        const data = this.props.data\r\n        console.log(data)\r\n        const ministries = new Set()\r\n        \r\n        for(const node of data){\r\n          ministries.add(node['府省庁'])\r\n        }\r\n        const ministryIndex = new Map(\r\n          Array.from(ministries).map((ministry,i)=>[ministry,i])\r\n        )\r\n        if(this.state.show === 'default'){\r\n          for (const node of data){\r\n            const index = ministryIndex.get(node['府省庁'])\r\n            node.fillColor = d3.hsl(360*(index/ministries.size),0.5,0.5,0.6).toString()\r\n          }\r\n        }\r\n        else if(this.state.show === 'ministry'){\r\n          const clusters = new Set()\r\n          for (const node of data){\r\n            clusters.add(node.cluster_in_ministry)\r\n          }\r\n          const clusterIndex = new Map(\r\n            Array.from(clusters).map((cluster,i)=>[cluster,i])\r\n          )\r\n          for(const node of data){\r\n            const index = clusterIndex.get(node.cluster_in_ministry)\r\n            node.fillColor = d3.hsl(360*(index/clusters.size),0.5,0.5,0.6).toString()\r\n          }\r\n        }\r\n        else if(this.state.show === 'business'){\r\n          const clusters = new Set()\r\n          for (const node of data){\r\n            clusters.add(node[this.state.policy])\r\n          }\r\n          const clusterIndex = new Map(\r\n            Array.from(clusters).map((cluster,i)=>[cluster,i])\r\n          )\r\n          for(const node of data){\r\n            const index = clusterIndex.get(node[this.state.policy])\r\n            node.fillColor = d3.hsl(360*(index/clusters.size),0.5,0.5,0.6).toString()\r\n          }\r\n        }\r\n        const policies = new Set()\r\n        for(const node of data){\r\n          policies.add(node['主要政策・施策'])\r\n        }\r\n        const projectIds = new Set()\r\n        for(const node of data){\r\n          projectIds.add(node['プロジェクトID'])\r\n        }\r\n        const projectIdIndex = new Map(\r\n          Array.from(projectIds).map((projectId,i)=>[projectId,i])\r\n        )\r\n        \r\n        const width = 1600\r\n        const height = 1000\r\n        const textMargin = 100\r\n        const labelMargin = 1100\r\n        const xScale = d3.scaleLinear()\r\n        .domain(d3.extent(data, (item) => +(item.objective_x)))\r\n        .range([-450,450])\r\n        .nice()\r\n        const yScale = d3.scaleLinear()\r\n        .domain(d3.extent(data, (item) => +(item.objective_y)))\r\n        .range([450, -450])\r\n        .nice() \r\n\r\n        if(this.state.money === '補正予算') {\r\n          console.log(this.state.money);\r\n        }\r\n        //const moneyScale = d3.scaleLog()\r\n        //.domain(d3.extent(data, (item) => (+(item[this.state.money])+10)))\r\n        //.base(10)\r\n        //.range([0, 15])\r\n        //.nice()\r\n\r\n        const showData = new Array()\r\n        data.filter((v,cnt)=>{\r\n          return(\r\n            !this.state.hideMinistries.has(v['府省庁'])\r\n          )\r\n        }).filter((v,i)=>{\r\n          if(v['事業名'].includes(this.state.filterKeyword)===true || v['事業の目的'].includes(this.state.filterKeyword)===true){\r\n            return true\r\n          }\r\n          else{\r\n            return false\r\n          }\r\n        }).filter((v,i)=>{\r\n          if(this.state.policy === \"ALL\"){\r\n            return true\r\n          }\r\n          else{\r\n            if(v['主要政策・施策'].includes(this.state.policy)===true){\r\n              return true\r\n            }\r\n            else{\r\n              return false\r\n            }\r\n          }\r\n        }).filter((v,i)=>{\r\n          if(v['公開年度'] === this.state.reportYear){\r\n            return true\r\n          }\r\n          else{\r\n            return false\r\n          }\r\n        }).filter((v,i) => {\r\n          if(this.state.divisions === \"ALL\") {\r\n            return true\r\n          } else {\r\n            return v[\"会計区分\"].includes(this.state.divisions)\r\n          }\r\n        }).filter((v,i) => {\r\n          if(+v[this.state.money] >= 1) {\r\n            return true\r\n          } else {\r\n            return false\r\n          }\r\n        }).map((v,i)=>{\r\n          showData.push(v)\r\n        })\r\n\r\n        const moneyScale = d3.scaleLog()\r\n        .domain(d3.extent(showData, (item) => (+(item[this.state.money])+10)))\r\n        .base(10)\r\n        .range([0, 15])\r\n        //.nice()\r\n\r\n        console.log(showData);\r\n  \r\n        return (\r\n          <div>\r\n            <div className='refine'>\r\n              <div>\r\n                <b>年度 : </b>\r\n                <select name='select' id='select' defalutValue='' onChange ={(event)=>{this.setState({reportYear:event.target.value})}}>\r\n                  <option value=''></option>\r\n                  <option value='2015'>27年度</option>\r\n                  <option value='2016'>28年度</option>\r\n                  <option value='2017'>29年度</option>\r\n                  <option value='2018'>30年度</option>\r\n                  <option value='2019'>31年度</option>\r\n                  </select>\r\n              </div>\r\n            </div>\r\n            <div className='refine'>\r\n              <div>\r\n                <b>表示方法 : </b>\r\n                <select name=\"select\" id=\"select\" defalutValue=\"default\" onChange ={(event)=>{this.setState({show:event.target.value})}}>\r\n                  <option value=\"default\">default</option>\r\n                  <option value=\"ministry\">ministry</option>\r\n                  <option value=\"business\">business</option>\r\n                  <option value=\"none\">none</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n            <div className='refine'>\r\n              <div>\r\n                <b>主要政策・施策 : </b>\r\n                <select name='select' id='select' defalutValue='ALL' onChange ={(event)=>{this.setState({policy:event.target.value})}}>\r\n                  <option value='ALL'>ALL</option>\r\n                  <option value='高齢社会対策'>高齢社会対策</option>\r\n                  <option value='男女共同参画'>男女共同参画</option>\r\n                  <option value='少子化社会対策'>少子化社会対策</option>\r\n                  <option value='子ども・若者育成支援'>子ども・若者育成支援</option>\r\n                  <option value='国土強靱化施策'>国土強靱化施策</option>\r\n                  <option value='障害者施策'>障害者施策</option>\r\n                  <option value='地方創生'>地方創生</option>\r\n                  <option value='科学技術・イノベーション'>科学技術・イノベーション</option>\r\n                  <option value='ＩＴ戦略'>ＩＴ戦略</option>\r\n                  <option value='一億総活躍推進'>一億総活躍推進</option>\r\n                  <option value='海洋政策'>海洋政策</option>\r\n                  <option value='観光立国'>観光立国</option>\r\n                  <option value='宇宙開発利用'>宇宙開発利用</option>\r\n                  <option value='地球温暖化対策'>地球温暖化対策</option>\r\n                  <option value='ＯＤＡ'>ＯＤＡ</option>\r\n                  <option value='自殺対策'>自殺対策</option>\r\n                  <option value='医療分野の研究開発関連'>医療分野の研究開発関連</option>\r\n                  <option value='沖縄振興'>沖縄振興</option>\r\n                  <option value='知的財産'>知的財産</option>\r\n                  <option value='2020年東京オリパラ'>2020年東京オリパラ</option>\r\n                  <option value='犯罪被害者等施策'>犯罪被害者等施策</option>\r\n                  <option value='クールジャパン'>クールジャパン</option>\r\n                  <option value='食育推進'>食育推進</option>\r\n                  <option value='その他'>その他</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n            <div className='refine'>\r\n              <div>\r\n                <b>予算（仮） : </b>\r\n                <select name=\"select\" id=\"select\" defalutValue=\"補正予算\" onChange ={(event)=>{this.setState({money:event.target.value})}}>\r\n                  <option value=\"補正予算\">補正予算</option>\r\n                  <option value=\"当初予算\">当初予算</option>\r\n                  <option value=\"前年度から繰越し\">前年度から繰越し</option>\r\n                  <option value=\"翌年度へ繰越し\">翌年度へ繰越し</option>\r\n                  <option value=\"執行額\">執行額</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n            <div className='refine'>\r\n              <div>\r\n                <b>会計区分（仮） : </b>\r\n                <select name=\"select\" id=\"select\" defalutValue=\"ALL\" onChange ={(event)=>{this.setState({divisions:event.target.value})}}>\r\n                  <option value=\"ALL\">ALL</option>\r\n                  <option value=\"一般会計\">一般会計</option>\r\n                  <option value=\"東日本大震災復興特別会計\">東日本大震災復興特別会計</option>\r\n                </select>\r\n              </div>\r\n            </div>\r\n            \r\n            <div className='refine'>\r\n              <form onSubmit={(event)=>{\r\n                  event.preventDefault()\r\n                  this.setState({filterKeyword:this.refs.search.value})\r\n                }}\r\n                >\r\n                <input ref='search'>\r\n                </input>\r\n                <button>絞り込み\r\n                </button>\r\n              </form>\r\n            </div>\r\n            <div>\r\n              <div>\r\n              <b>事業数：{(showData.length).toString()}</b>\r\n              </div>\r\n            </div>\r\n            <svg style = {{cursor:'move'}}ref = 'ff14' viewBox= {`0 0 ${width} ${height}`}>\r\n              <rect x=\"1\" y=\"1\" width={width-2} height={height-2}\r\n                fill=\"none\" stroke=\"blue\" stroke-width=\"2\" />\r\n              <g transform = {`translate(1400,0)`}>\r\n                <text x={0} y={76}>(千万円)</text>\r\n                {\r\n                  moneyScale.ticks(7).map((m,i)=>{ \r\n                    return <g>\r\n                      <circle \r\n                        cx={0} cy={`${i*30+textMargin}`}\r\n                        r={moneyScale(m)}\r\n                        fill='black'\r\n                        />\r\n                      <text x={20}y={`${i*30+textMargin+6}`}>{m/10}</text>\r\n                    </g>\r\n                  })\r\n                }\r\n              </g>\r\n              <g transform = {`translate(1100,0)`}>\r\n                <g style = {{cursor:'pointer'}}onClick={()=>{  \r\n                    if(this.state.hideMinistries.size === 0){\r\n                      this.setState({hideMinistries:new Set(ministries)})\r\n                    }else{\r\n                      this.setState({hideMinistries:new Set()})\r\n                    }}}>\r\n                  <text x={0} y={`${-1*30+textMargin+6}`}>(府省庁)</text>\r\n                </g>\r\n                {\r\n                  Array.from(ministries).map((ministry,i)=>{\r\n                    return <g key = {i} style = {{cursor:'pointer'}}onClick={()=>{\r\n                      const newSet = new Set(this.state.hideMinistries)\r\n                        if(newSet.has(ministry)){\r\n                          newSet.delete(ministry)\r\n                        }else{\r\n                          newSet.add(ministry)\r\n                        }\r\n                        this.setState({hideMinistries:newSet})\r\n                      }}\r\n                      >\r\n                      <circle \r\n                        cx={0} cy={`${i*30+textMargin}`}\r\n                        r='10'\r\n                        fill={d3.hsl(360*(i/20),0.5,0.5,0.6)}\r\n                        />\r\n                      <text x={10}y={`${i*30+textMargin+6}`}>{ministry}</text>\r\n                    </g>\r\n                  })\r\n                }\r\n              </g>\r\n              <g transform = {`translate(1400,600)`}>\r\n                <g style = {{cursor:'pointer'}}onClick={()=>\r\n                  d3.select(this.refs.ff14).call(this.zoom.transform, d3.zoomIdentity.scale(1))\r\n                  }>\r\n                  <text x={0} y={76}>リセット</text>\r\n                </g>\r\n              </g>\r\n              <g transform = {`translate(${this.state.transform.x},${this.state.transform.y})scale(${this.state.transform.k})`}>\r\n                <g>\r\n                  {\r\n                    showData.map((v,i)=>{\r\n                      return <g key={i} transform = {`translate(500,${height/2})`}>\r\n                        <title>\r\n                          {v['府省庁']+', '}\r\n                          {v['主要政策・施策']+', '}\r\n                          {v['事業名']+', '}\r\n                          {+(v[this.state.money])/10}\r\n                        </title>\r\n                        <circle style = {{cursor:'pointer'}}\r\n                          cx={xScale(+(v.objective_x))} cy={yScale(+(v.objective_y))} \r\n                          r={moneyScale(+(v[this.state.money])+10)}\r\n                          fill={v.fillColor}\r\n                          />\r\n                      </g>\r\n                    })\r\n                  }\r\n                </g>\r\n              </g>\r\n            </svg>\r\n          </div>\r\n        );\r\n      \r\n    }\r\n  }\r\n  \r\n  class App extends React.Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = {\r\n        data: null\r\n      };\r\n    }\r\n    \r\n    componentDidMount() {\r\n      const url =\r\n        \"./data/tsne_+_clusters_list.json\"; //あ\r\n      window\r\n        .fetch(url)\r\n        .then(response => response.json())\r\n        .then(data => {\r\n          this.setState({ data });\r\n        });\r\n    }\r\n  \r\n    render() {\r\n      const { data } = this.state;\r\n      return (\r\n        <>\r\n          <section className=\"section\">\r\n            <div className=\"container\">\r\n              <div className=\"content has-text-centered\">\r\n                <div style={{ margin: \"2em\" }}>\r\n                  {data&&\r\n                    <Chart data={data} />\r\n                    }\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </section>\r\n          {/* <footer className=\"footer\">\r\n          </footer> */}\r\n        </>\r\n      );\r\n    }\r\n  }\r\n  \r\n  class Root extends React.Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = {\r\n        error: null\r\n      };\r\n    }\r\n  \r\n    static getDerivedStateFromError(error) {\r\n      return { error };\r\n    }\r\n  \r\n    componentDidCatch(error, info) {\r\n      console.error(error.toString());\r\n    }\r\n  \r\n    render() {\r\n      const { error } = this.state;\r\n      if (error != null) {\r\n        return (\r\n          <div className=\"hero is-danger is-fullheight\">\r\n            <div class=\"hero-body\">\r\n              <div class=\"container\">\r\n                <h1 class=\"title\">{error.toString()}</h1>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        );\r\n      }\r\n      return <App />;\r\n    }\r\n  }\r\n  \r\n\r\nrender(<Root />, document.querySelector('#content'))"],"sourceRoot":""}